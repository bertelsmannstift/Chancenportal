(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{518:function(e,t,i){"use strict";(function(e){var a=i(535),l=i.n(a),n=(i(536),null),s=null;t.a={name:"CustomUpload",props:{label:{default:"Bild hinzufügen (max. 5)",type:String},labelSelected:{default:"Ausgewählte Bilder",type:String},name:{default:"file[data]",type:String},fileName:{default:"file[name]",type:String},buttonText:{default:"+ Datei auswählen",type:String},maxFiles:{default:5,type:[String,Number]},inputFiles:{default:"",type:String},maxFilesError:{default:"Es können nur 5 Bilder hinterlegt werden!",type:String},editor:{default:!0,type:Boolean},ratio:{default:1.33333333333333,type:String}},data:function(){return{files:[],initRatio:1,showEditor:!1,cropper:null}},watch:{files:function(e){this.$emit("select",e)}},directives:{crop:{inserted:function(e){s=e.getAttribute("data-mime");var t=e.getAttribute("data-ratio");n&&(n.destroy(),n=null),n=new l.a(e,{dragMode:"move",viewMode:0,aspectRatio:t,autoCropArea:.9,restore:!1,guides:!1,center:!1,highlight:!1,cropBoxMovable:!1,cropBoxResizable:!1,toggleDragModeOnDblclick:!1})}}},methods:{crop:function(e){this.showEditor=!1,e.dataUrl=n.getCroppedCanvas({fillColor:"#fff"}).toDataURL(s)},nonDeletedFiles:function(){return this.files.filter((function(e){return!e.deleted}))},removeFile:function(e,t){e.uploaded?e.deleted=!0:this.files.splice(t,1),this.$forceUpdate()},selectFile:function(e){this.$refs.file.click(e)},resizeImage:function(e,t){var i=document.createElement("img");i.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d");a.drawImage(i,0,0);var l=i.width,n=i.height;l>n?l>1280&&(n*=1280/l,l=1280):n>1280&&(l*=1280/n,n=1280),e.width=l,e.height=n,(a=e.getContext("2d")).drawImage(i,0,0,l,n),t(e)},i.src=e},onFileChange:function(e){var t=this,i=e.target.files||e.dataTransfer.files;if(i.length)if(i.length+this.nonDeletedFiles()>parseInt(this.maxFiles))alert(this.maxFilesError);else{for(var a=0;a<i.length;a++)!function(e){var i=new FileReader;i.onload=function(i){t.resizeImage(i.target.result,(function(a){var l="image/png"===i.target.result.split(";")[0].replace("data:","")?"image/png":"image/jpeg";a.toBlob((function(i){i&&t.files.push({dataUrl:a.toDataURL(l),mime:l,size:i.size,uploaded:!1,deleted:!1,name:e.name})}),l,.9)}))},i.readAsDataURL(e)}(i[a]);this.editor&&(this.showEditor=!0),this.$refs.file.value=""}}},mounted:function(){var t=this;e("body").append(this.$refs.modal),this.initRatio=parseFloat(this.ratio);var i=this.$el;i.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault()}),!1),i.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()}),!1),i.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),t.onFileChange(e)}),!1),this.files=this.inputFiles.toString().length?JSON.parse(this.inputFiles):[],this.files.forEach((function(e){e.deleted=!1,e.uploaded=!0})),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){var a=this;setTimeout((function(){for(var l=atob(a.toDataURL(t,i).split(",")[1]),n=l.length,s=new Uint8Array(n),o=0;o<n;o++)s[o]=l.charCodeAt(o);e(new Blob([s],{type:t||"image/png"}))}))}})}}}).call(this,i(16))},566:function(e,t,i){"use strict";i.r(t);var a=i(518).a,l=(i(494),i(37)),n=Object(l.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"custom-upload",class:{"custom-upload--singlefile":1==e.maxFiles}},[i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:""},on:{change:e.onFileChange}}),e._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-6 col-sm-12 margin-inner-sm"},[i("label",{staticClass:"custom-upload__label"},[e._v(e._s(e.label))]),e._v(" "),i("button",{staticClass:"btn btn--full",attrs:{disabled:e.nonDeletedFiles().length>=e.maxFiles},on:{click:function(t){return t.preventDefault(),e.selectFile(t)}}},[e._v(e._s(e.buttonText))])]),e._v(" "),i("div",{staticClass:"col-lg-6 col-sm-12"},[i("label",{staticClass:"custom-upload__label"},[e._v(e._s(e.labelSelected))]),e._v(" "),i("transition-group",[i("div",{key:"files"},[e.files.length?i("input",{attrs:{type:"hidden",name:e.name},domProps:{value:JSON.stringify(e.files)}}):e._e(),e._v(" "),e._l(e.files,(function(t,a){return!t.deleted||e.files.length<=1||e.maxFiles>1?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.deleted,expression:"!file.deleted"}],key:a,staticClass:"custom-upload__file",class:{"custom-upload__file--onefile":1===e.files.length}},[i("div",{staticClass:"custom-upload__file-name"},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),i("div",{staticClass:"custom-upload__delete",attrs:{title:"Datei löschen"},on:{click:function(i){return i.preventDefault(),i.stopPropagation(),e.removeFile(t,a)}}},[i("i",{staticClass:"icon-times-circle"})])]):e._e()}))],2)])],1)]),e._v(" "),i("transition",{attrs:{name:"modal-fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEditor,expression:"showEditor"}],ref:"modal",staticClass:"modal-backdrop"},[i("div",{staticClass:"modal",attrs:{role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"}},e._l(e.files,(function(t){return e.files.length&&!t.deleted?i("div",[i("header",{staticClass:"modal-header",attrs:{id:"modalTitle"}},[i("h3",{staticStyle:{"margin-bottom":"10px"}},[i("strong",[e._v("Bild zuschneiden")])]),e._v(" "),i("p",[e._v("\n                            Positionieren Sie das Bild per Drag & Drop in den entsprechenden Ausschnitt. Mit dem Mausrad können Sie das Bild entsprechend Zoomen.\n                        ")]),e._v(" "),i("div",{staticClass:"modal-body__actions"},[i("button",{staticClass:"btn",on:{click:function(i){return e.crop(t)}}},[e._v("Bild zuschneiden")])])]),e._v(" "),i("section",{staticClass:"modal-body",attrs:{id:"modalDescription"}},[i("div",{staticClass:"modal-body__image-container"},[i("img",{directives:[{name:"crop",rawName:"v-crop"}],attrs:{id:"cropimg","data-mime":t.mime,"data-ratio":e.initRatio,src:t.dataUrl,alt:""}})])])]):e._e()})),0)])])],1)}),[],!1,null,null,null);t.default=n.exports}}]);